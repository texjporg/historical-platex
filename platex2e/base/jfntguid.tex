% \iffalse meta-comment
%
% Japanese edition: Copyright 1994,1995 ASCII Corporation.
%
% Copyright 1993-1995 the LaTeX3 project and the individual authors
% listed elsewhere in this file.   All rights reserved.
%
% For further copyright information see the file legal.txt, and any
% other copyright notices in this file.
% 
% This file is part of the LaTeX2e system.
% ----------------------------------------
%  This system is distributed in the hope that it will be useful,
%  but WITHOUT ANY WARRANTY; without even the implied warranty of
%  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
% 
%  For error reports concerning UNCHANGED versions of this file no more
%  than one year old, see bugs.txt.
%
%  Please do not request updates from us directly.  Primary
%  distribution is through the CTAN archives.
% 
%
% IMPORTANT COPYRIGHT NOTICE:
% 
% You are NOT ALLOWED to distribute this file alone.
% 
% You are allowed to distribute this file under the condition that it is
% distributed together with all files mentioned in manifest.txt.
% 
% If you receive only some of these files from someone, complain!
% 
% Permission granted to copy this file to another file with a clearly
% different name and to customize the declarations in that copy to serve
% the needs of your installation, provided that you comply with
% the conditions in the file legal.txt
%
% However, NO PERMISSION is granted to produce or to distribute a
% modified version of this file under its original name.
%
% You are NOT ALLOWED to change this file.
%
%
% \fi
% Filename: jfntguid.tex
 
\NeedsTeXFormat{pLaTeX2e}[1995/02/17]
 
\documentclass{jltxguid}[1995/02/17]
 
\title{\LaTeXe{} font selection}

\author{\copyright~Copyright 1995, \LaTeX3 Project Team.\\
  All rights reserved.\thanks{この文書は、LaTeXシステムに含まれる、
  \texttt{fntguide.tex}を ken-na@ascii.co.jp が日本語に訳したものです。}}

\date{10 June 1995}
 
\begin{document}
 
\maketitle

\tableofcontents
 
\section{はじめに}

このドキュメントは\LaTeX{}文書処理システムの新しいフォント選択機能について
説明しています。|times|や|latexsym|のようなフォントローディングパッケージを
作成するユーザに関係します。
このドキュメントは\TeX{}フォントと\LaTeX{}パッケージに親しんでいる
パッケージ作成者を対象に、新しい機能だけを解説しています。
このドキュメントは、ユーザガイドでもなく、
\LaTeXe{}フォントの参照マニュアルでもありません。

\subsection{\LaTeXe~フォント}
 
\LaTeX~2.09と\LaTeXe{}で最も異なる点はフォントの選択方法です。\LaTeX~2.09では、
コンピュータモダンフォントが\LaTeX フォーマットに組み込まれていましたので、
他のフォントを使うように\LaTeX をカスタマイズするのに多大な努力が必要でした。
 
\LaTeXe のフォーマットファイルには最小限のフォントだけが組み込まれます。
また、テキストフォントや数式フォントを新しくロードするためのコマンドがあります。
著者は|times|や|latexsym|のようなパッケージを用いて、
これらのフォントにアクセスすることができます。
このドキュメントはフォントローディングパッケージなどの作成方法について
説明しています。
 
\LaTeXe{}フォント選択システムは最初、
`New Font Selection System'(NFSS)として1989年にリリースされ、
1993年にリリース2になりました。\LaTeXe{}はNFSSリリース2を標準で含んでいます。
 
\subsection{概要}
 
次に、このドキュメントで説明される\LaTeX の新しいフォントコマンドについての
説明の概要を示します。
 
\begin{description}
 
\item[第\ref{Sec:text}章]では、クラスやパッケージ内で
  フォントを選択するためのコマンドについてです。
  ５つの\LaTeX{}フォント属性と、フォント選択用コマンドを列挙しています。
  また、|\textrm|や|\textit|のような著者コマンドを
  ユーザの文書デザインに合うようにカスタマイズする方法も説明しています。
 
\item[第\ref{Sec:math}章]では、
  \LaTeX{}数式フォントを制御するコマンドについてです。
  新しい数式フォントと数学記号の記述方法を説明しています。
 
\item[第\ref{Sec:install}章]では、
  \LaTeX へ新しくフォントをインストールする方法についてです。
  \LaTeX{}フォント属性がどのようにして\TeX{}フォント名に置き変わるのか、
  および、ユーザが独自のフォントを使うときのフォント定義ファイルの記述方法を
  説明しています。
 
\item[第\ref{Sec:encode}章]では、テキストフォントエンコードについてです。
  新しいエンコードの宣言方法とコマンドの定義方法を説明しています。
  エンコード内の合字など
  |\AE|や|\"|のような、そのエンコード内の合字などに依存して、
  異なるエンコードで異なる定義となるコマンドについてです。
 
\item[第\ref{Sec:misc}章]では、その他の事柄についてです。
  \LaTeX{}がどのようにして代用フォントを実行するのか、
  \LaTeX{}フォーマットにプリロードされるフォントのカスタマイズ方法、
  そして\LaTeX{}フォント選択で使われる命名規則についてなどの説明をしています。
 
\end{description}
 
\subsection{別の情報}
 
\LaTeXe{}の新しい機能を含んだ、\LaTeX{}の一般的な紹介については、
\emph{\LaTeXbook}(Leslie Lamport, Addison Wesley, 2nd~ed, 1994)を
参照してください。
 
\LaTeX{}フォント選択スキーマの、より詳細な説明は、
\emph{\LaTeXcomp}(Goossens, Mittelbach and Samarin, Addison Wesley, 1994)に
あります。
 
\LaTeX{}フォント選択スキーマは\TeX{}に基づいています。
\TeX{}は\emph{The \TeX book} (Donald E.~Knuth, Addison Wesley, 1986,
revised in 1991)に開発者自身により、\TeX~3の機能も含んで説明されています。
 
Sebastian Rahtzの|psnfss|は、
\LaTeX で多くのタイプ１フォントを使うためのソフトウェアが入っています。
これらは\LaTeX と同様の場所で使えなくてはなりません。
 
 
|psnfss|はAlan Jefferyの|fontinst|によって生成されたフォントを使います。
これはアドビフォントメトリックフォーマットから
第\ref{Sec:install}章で述べられている|.fd|ファイルの生成に含まれる、
\LaTeX で使用可能なフォーマットへ変換することができます。
|fontinst|は\LaTeX と同様の場所で使えなくてはなりません。
 
実用的なものとして、\LaTeX{}は\emph{Filenames for fonts}, 
Karl Berry, \emph{TUGboat} 11(4), 1990で説明されている、
フォント命名スキーマを用いています。
 
クラス作成者用ガイド\emph{\clsguide}(|clsguide.tex|)は、
文書クラスやパッケージの作成者のために新しい\LaTeX{}の機能を説明しています。
 
我々は如々に、\LaTeX{}のためのソースコードを
\LaTeX{}文書\emph{\sourcecode}の中に戻しつつあります。
この文書は\LaTeX{}コマンドの索引を含み、
また|source2e.tex|で組版をすることができます。
 
\TeX{}および\LaTeX{}についてもっと知りたい場合は、
ローカルな\TeX{}ユーザグループに連絡してください。
国際\TeX{}ユーザグループの連絡先は、
P.~O. Box~869, Santa Barbara, CA 93102-0869, USA, Fax:~+1 805 963 8358,
E-mail:~tug@tug.org です。
 
\section{テキストフォント}
\label{Sec:text}
 
この節では、フォントの記述や選択をするためのクラスやパッケージ作成者に
便利なコマンドについて説明します。
 
\subsection{テキストフォント属性}
 
\LaTeX{}の各テキストフォントは5つの\emph{属性}を持っています。
\begin{description}
 
\item[エンコード] フォントに現れる文字の順序を示します。
  \LaTeX{}で使われる2つの一般的なテキストエンコードは、
  クヌースの`\TeX{}テキスト'エンコードと`\TeX{}拡張テキスト'エンコードです。
  後者は1990年のCorkでの\TeX{}カンファレンスの間、\TeX{}ユーザグループの会員に
  よって開発されたエンコードです（そのため`Corkエンコード'という名前です）。
  
\item[ファミリ] フォントの集まりの名前です。通常、フォント基盤によって、
  共通の名前でグループ分けされます。
  たとえば、`アドビタイムズ', `ITCガラモンド', 
  クヌースの`コンピュータモダンローマン'はすべてフォントファミリです。
 
\item[シリーズ\footnotemark]
   \footnotetext{写植では通常\emph{ウェイト}と呼ばれます}%
   どれだけ重いか軽いフォントかです。たとえば、`medium weight',
   `narrow', `bold extended'はすべてシリーズです。
 
\item[シェイプ\footnotemark]
   \footnotetext{写植では通常\emph{シリーズ}と呼ばれます}%
   フォントファミリ内にある文字の形です。たとえば、`イタリック'、
   `斜体', `アップライト'(ときどき`ローマン'と呼ばれます)は
   すべてシェイプです。
 
\item[サイズ] `10pt'のような、フォントのデザインフォントです。
 
\end{description}
これらの値は\LaTeX{}によって省略形で与えられます。
フォントエンコード用の最も一般的な値は次のとおりです。
\begin{center}
\begin{minipage}{.7\linewidth}
   \begin{tabular}{rl}
      |OT1|   & \TeX{}テキスト\\
      |T1|    & 拡張された\TeX{}テキスト\\
      |OML|   & \TeX{}数式イタリック\\
      |OMS|   & \TeX{}数学記号\\
      |OMX|   & 大型\TeX{}数学記号\\
      |U|     & 未知 \\
      |L<xx>| & ローカルエンコード
   \end{tabular}
\end{minipage}
\end{center}
`ローカル'エンコードは、多種のサイズの組織のロゴを含んでいるフォントのような、
ローカルでのみ有効なフォントエンコードを管理します。
 
ここに示したよりも、はるかに多くのフォントファミリがあります。
いくつか一般的なものは次のとおりです。
\begin{center}
\begin{minipage}{.7\linewidth}
   \begin{tabular}{rl}
      |cmr|  & コンピュータモダンローマン\\
      |cmss| & コンピュータモダンサンセリフ\\
      |cmtt| & コンピュータモダンタイプライタ\\
      |cmm|  & コンピュータモダン数式イタリック\\
      |cmsy| & コンピュータモダン数学記号\\
      |cmex| & コンピュータモダン拡張数学記号\\
      |ptm|  & アドビタイムズ\\
      |phv|  & アドビヘルベチカ\\
      |pcr|  & アドビクーリエ
   \end{tabular}  
\end{minipage}
\end{center}
フォントシリーズ用の最も一般的な値は次のとおりです。
\begin{center}
\begin{minipage}{.7\linewidth}
   \begin{tabular}{rl}
      |m|    & Medium  \\
      |b|    & Bold  \\
      |bx|   & Bold extended \\
      |sb|   & Semi-bold \\
      |c|    & Condensed
   \end{tabular}
\end{minipage}
\end{center}
フォントシェイプ用の最も一般的な値は次のとおりです。
\begin{center}
\begin{minipage}{.7\linewidth}
   \begin{tabular}{rl}
      |n|    & ノーマル（`正体'または`ローマン'）\\
      |it|   & イタリック \\
      |sl|   & スラント（または斜体）\\
      |sc|   & Caps and small caps
   \end{tabular}
\end{minipage}
\end{center}
フォントサイズは、|10pt|や|1.5in|や|3mm|のように寸法を指定します。
各\LaTeX{}フォントのこれらの5つのパラメータの例を次に示します。
\begin{center}
   \begin{tabular}{@{}c@{\,}c@{\,}c@{\,}c@{\,}ccc@{}}
      \multicolumn{5}{@{}c}{\emph{\LaTeX{}指定}} &
      \emph{フォント} & \emph{\TeX{}フォント名} \\
      |OT1| & |cmr| & |m| & |n| & |10pt| &
      コンピュータモダンローマン 10pt & |cmr10| \\
      |OT1| & |cmss| & |m| & |sl| & |12pt| &
      コンピュータモダンサンセリフ斜体 12pt & |cmssi12| \\
      |OML| & |cmm| & |m| & |it| & |10pt| &
      コンピュータモダン数式イタリック 10pt & |cmmi10| \\
      |T1| & |ptm| & |b| & |it| & |18pt| &
      アドビタイムズボールドイタリック18pt & |ptmbq at 18pt|
   \end{tabular}
\end{center}
これらの5つのパラメータは\LaTeX{}がオーバフルボックスの警告を出すときは
いつでも表示されます。次に例を示します。
\begin{verbatim}
   Overfull \hbox (3.80855pt too wide) in paragraph at lines 314--318
   []\OT1/cmr/m/n/10 Normally [] and [] will be iden-ti-cal,
\end{verbatim}
フォント用の著者コマンドは5つの属性を設定します。
\begin{center}
   \begin{tabular}{rcl}
      \emph{著者コマンド} & \emph{属性} & |article|\emph{クラスでの値} \\
      |\textrm{..}| or |\rmfamily|    & family & |cmr| \\
      |\textsf{..}| or |\sffamily|    & family & |cmss| \\
      |\texttt{..}| or |\ttfamily|    & family & |cmtt| \\
      |\textmd{..}| or |\mdseries|    & series & |m| \\
      |\textbf{..}| or |\bfseries|    & series & |bx| \\
      |\textup{..}| or |\upshape|     & shape  & |n| \\
      |\textit{..}| or |\itshape|     & shape  & |it| \\
      |\textsl{..}| or |\slshape|     & shape  & |sl| \\
      |\textsc{..}| or |\scshape|     & shape  & |sc| \\
      |\tiny|         & size   & |5pt| \\
      |\scriptsize|   & size   & |7pt| \\
      |\footnotesize| & size   & |8pt| \\
      |\small|        & size   & |9pt| \\
      |\normalsize|   & size   & |10pt| \\
      |\large|        & size   & |12pt| \\
      |\Large|        & size   & |14.4pt| \\
      |\LARGE|        & size   & |17.28pt| \\
      |\huge|         & size   & |20.74pt| \\
      |\Huge|         & size   & |24.88pt|
   \end{tabular}
\end{center}
これらのコマンドによって使われる値は、文書クラスで決定されます。
使われるパラメータは第\ref{Sec:text.param}節で定義されています。
 
新しいエンコードを選択するための著者コマンドはないことに注意してください。
これらは|fontenc|パッケージのようなパッケージで解決されなくてはいけません。
 
この節では\LaTeX{}がどのようにしてフォント指定を\TeX{}のフォント名に置き換える
かを説明していません。これは第\ref{Sec:install}章で説明されています。
 
\subsection{選択コマンド}
 
次の低レベルコマンドは、テキストフォントを選択するのに使われます。
 
\begin{decl}
|\fontencoding| \arg{encoding} \\
|\fontfamily|  \arg{family}\\
|\fontseries| \arg{series}\\
|\fontshape| \arg{shape}\\
|\fontsize| \arg{size} \arg{baselineskip}
\end{decl}
 
これらのコマンドはそれぞれ、フォント属性の一つを設定します。
|\fontsize|は|\baselineskip|も設定します。
使用中の実効フォントはこれらのコマンドによって変更されませんが、
カレント属性は次回の|\selectfont|コマンドの後で使うためのフォントを
決定するために使われます。
 
\begin{decl}
|\selectfont|
\end{decl}
このフォント属性のカレント値に基づいた、テキストフォントを選択します。
 
\emph{警告}: |\selectfont|コマンドは\emph{必ず}、5つの|\font<parameter>|
コマンドによるフォントパラメータの設定の直後、続く文章の直前に置いてください。
たとえば、次は正しい例です。
\begin{verbatim}
   \fontfamily{ptm}\fontseries{b}\selectfont ある文章。
\end{verbatim}
しかし、次の例は\emph{誤り}です。
\begin{verbatim}
   \fontfamily{ptm} ある \fontseries{b}\selectfont 文章.
\end{verbatim}
|\font<parameter>|コマンドと|\selectfont|コマンドの間に文章を置くと、
期待しない結果を得るかもしれません。
 
\begin{decl}
|\usefont| \arg{encoding} \arg{family} \arg{series} \arg{shape}
\end{decl}
|\font|\ldots{}コマンドに続けて|\selectfont|を呼び出すのに等しい省略形です。
 
 
\subsection{内部}
 
フォント属性のカレント値は内部マクロに保持されています。
 
\begin{decl}
      |\f@encoding| \\
      |\f@family|  \\
      |\f@series|  \\
      |\f@shape|  \\
      |\f@size|    \\
      |\f@baselineskip| \\
      |\tf@size|  \\
      |\sf@size|  \\
      |\ssf@size|
\end{decl}
 
これらはエンコード、ファミリ、シリーズ、シェイプ、サイズ、ベースラインスキップ、
メイン数式サイズ、スクリプト数式サイズ、およびスクリプトスクリプト数式サイズの
カレント値を保持します。最後の3つは数式内でのみアクセス可能です。
数式外では不定値となっています。
 
次の例は、ベースラインスキップを変更しないでサイズを12に設定します。
\begin{verbatim}
   \fontsize{12}{\f@baselineskip}
\end{verbatim}
\emph{決して}内部コマンドの値を直接、変更しないでください。
これらは|\fontfamily|や|\fontseries|などの低レベルコマンドで使われるときだけ
変更されるべきです。この警告を無視するとコードがループする可能性があります。
 
\subsection{著者コマンド用パラメータ}
\label{Sec:text.param}
 
|\textrm|や|\rmfamily|などのような別のコマンドによって設定されたパラメータ値は、
\LaTeX{}内にhard-wired ではありません。にもかかわらず、これらのコマンドは
文書クラスやパッケージによって設定されたパラメータ数の値を使います。
たとえば、デフォルトファミリの名前である|\rmdefault|は、|\textrm|と
|\rmfamily|によって選択されます。したがって文書内でアドビTimes, Helvetica,
Courierを設定するように文書デザイナーが記述をするには、次のようにします。
\begin{verbatim}
   \renewcommand{\rmdefault}{ptm}
   \renewcommand{\sfdefault}{phv}
   \renewcommand{\ttdefault}{pcr}
\end{verbatim}
 
\begin{decl}
 |\encodingdefault| \\
 |\familydefault|   \\
 |\seriesdefault|   \\
 |\shapedefault|
\end{decl}
メインボディフォントは、エンコード、ファミリ、シリーズ、シェイプを持ちます。
これらのデフォルトは、|OT1|, |\rmdefault|, |m|, |n|です。
デフォルトファミリが|\rmdefault|であることに注意をしてください。
これは|\rmdefault|を変更すると、
その文書のメインボディフォントが変更することを意味します。
 
\begin{decl}
 |\rmdefault|  \\
 |\sfdefault| \\
 |\ttdefault|
\end{decl}
ファミリは|\textrm|, |\rmfamily|, |\textsf|, |\sffamily|, |\texttt|, |\ttfamily|
によって選択されます。これらのデフォルトは、|cmr|, |cmss|, |cmtt|です。
 
\begin{decl}
 |\bfdefault| \\
 |\mddefault|
\end{decl}
シリーズは|\textbf|, |\bfseries|, |\textmd|, |\mdseries|によって選択されます。
これらのデフォルトは|bx|と|m|です。これらの値は使われたデフォルトファミリに
合います。標準文書フォントとして、たとえばPostScriptフォントなどのような
別のフォントを使うときは、|b|の|\bfdefault|の値を`bold extended'シリーズを持つ
ファミリに調整することが必要かもしれません。
|psnfss|によって提供されるフォントを変更するには、
|bx|シリーズから|b|シリーズへ特別な|\DeclareFontShape|宣言と|ssub|サイズ関数で
``静かな''代用を定義します。
詳細については、第\ref{sec:sizefunct}節を参照してください。
 
 
\begin{decl}
 |\itdefault| \\
 |\sldefault| \\
 |\scdefault| \\
 |\updefault|
\end{decl}
シェイプは|\textit|, |\itshape|, |\textsl|, |\slshape|, |\textsc|, |\scshape|,
|\textup|, |\upshape|によって選択されます。
これらのデフォルトは、|it|, |sl|, |sc|, |n|です。
 
サイズコマンドにはパラメータがないことに注意してください。
これらは次のように直接、クラスファイルで定義されています。
\begin{verbatim}
   \renewcommand{\normalsize}{\fontsize{10}{12}\selectfont}
\end{verbatim}
もっと緻密な例は、|article|, |report|, |book|クラス用の
|classes.dtx|ソース文書にあります。
 
 
\subsection{特殊フォント宣言コマンド}
 
\begin{decl}
|\DeclareFixedFont| \arg{cmd} \arg{ENC} \arg{family} \arg{series}
                    \arg{shape} \arg{size}
\end{decl}
 
属性\m{ENC}, \m{family}, \m{series}, \m{shape}, \m{size}によって指定された
フォントを選択するためのコマンドになる、コマンド\m{cmd}を宣言します。
 
ベースラインスキップやその他のとりまく条件を何の調整もせずに、
フォントが選択されます。
 
|{\picturechar .}|を作る次の例は、小さなドットをとても速く選択します。
\begin{verbatim}
   \DeclareFixedFont{\picturechar}{OT1}{cmr}{m}{n}{5}
\end{verbatim}
 
 
\begin{decl}
|\DeclareTextFontCommand| \arg{cmd} \arg{font-switches}
\end{decl}
 
引数を一つ持つフォントコマンドになる、コマンド\m{cmd}を宣言します。
カレントフォント属性は\m{font-switches}によってローカルに変更されます。
そして\m{cmd}の引数が新しいフォントの結果として組版されます。
 
|\DeclareTextFontCommand|によって定義されたコマンドは自動的に、
必要なイタリック補整を（両側に）入れます。
 
次の例は、カーネルによって定義されている|\textrm|です。
\begin{verbatim}
   \DeclareTextFontCommand{\textrm}{\rmfamily}
\end{verbatim}
 
いつでもメイン文書フォントのイタリックシェイプで引数を組版するコマンドを
定義するには、次のようにします。
\begin{verbatim}
   \DeclareTextFontCommand{\normalit}{\normalfont\itshape}
\end{verbatim}
 
この宣言はコマンドの意味を変更するために使うことができます。
\m{cmd}がいつも定義されていれば、それが再定義されたかの記録が
ログファイル内に置かれます。
 
\begin{decl}
|\DeclareOldFontCommand| \arg{cmd} \arg{text-switch}
                                   \arg{math-switch}
\end{decl}
 
フォントを切り替えるための\m{cmd}コマンドを定義します。
このコマンドは|{<cmd>...}|の構文で使います。
\m{text-switch}はテキスト内で使われたときの宣言で、
\m{math-switch}は数式内で使われたときの宣言です。
|\mathit|のような数式文字フォントコマンドは、\m{math-switch}で使われるとき、
引数を一つも持ってはいけません。ここで使う引数は、
\m{cmd}の設定によって要求されたように、フォントを切り替えるように振る舞うため、
それらの状態を変更します。
 
この宣言は、\LaTeX~2.09での|\rm|のようなコマンドを設定するために使います。
この宣言を新しいフォントコマンドを作るために、
誤って用いることの\emph{ない}よう強く望みます。
 
次の例は、テキスト内で使われた場合に|\it|をメイン文書フォントのイタリック
シェイプを生成するようにし、また数式内で使われた場合には、数式文字フォント
|\mathit|によって生成される普通のフォントに切り替わるように定義します。
\begin{verbatim}
   \DeclareOldFontCommand{\it}{\normalfont\itshape}{\mathit}
\end{verbatim}
 
この宣言はコマンドの意味を変更するために使います。\m{cmd}がすでに定義されて
いる場合、定義されていた記録がログファイルに置かれます。
 
 
\section{数式フォント}
\label{Sec:math}
 
この章では、クラスやパッケージ作成者が
数式フォントや数式コマンドを記述するのに便利なコマンドを説明します。
 
\subsection{数式フォント属性}
 
数式モード内のフォントの選択は、テキストフォントの選択と大きく異なります。
 
いくつかの数式フォントは、|\mathsf{max}|や|\mathbf{vec}|のような、
引数を一つ持つコマンドによって、明示的に選択されます。
これらは\emph{数式文字フォント}と呼ばれます。数式文字フォントコマンドは、
|\mathalpha|型の文字や記号に使われているフォントにだけ影響し、
その引数に含まれている、その他の記号は変更しません。
詳細は、第\ref{Sec:math.commands}節を参照してください。
次に、あらかじめ定義されている数式文字フォントを示します。
\begin{center}
   \begin{tabular}{ccc}
      \emph{数式文字フォント} & \emph{意味} & \emph{例} \\
      |\mathnormal|   & default      & $abcXYZ$ \\
      |\mathrm|       & roman        & $\mathrm{abcXYZ}$ \\
      |\mathbf|       & bold roman   & $\mathbf{abcXYZ}$ \\
      |\mathsf|       & sans serif   & $\mathsf{abcXYZ}$ \\
      |\mathit|       & text italic  & $\mathit{abcXYZ}$ \\
      |\mathtt|       & typewriter   & $\mathtt{abcXYZ}$ \\
      |\mathcal|      & calligraphic & $\mathcal{XYZ}$
   \end{tabular}
\end{center}
その他の数式フォントは、|\oplus|（$\oplus$を生成）のようなコマンド、
あるいは|>>|や|+|のような直接の文字で、\TeX{}によって選択されます。
このような数学記号を含んでいるフォントを\emph{数学記号フォント}と呼びます。
次に、あらかじめ定義されている数学記号フォントを示します。
\begin{center}
   \begin{tabular}{ccc}
  \emph{数学記号フォント} & \emph{意味}         & \emph{例} \\
      |operators|    & |\mathrm|からの記号        & $[\;+\;]$ \\
      |letters|      & |\mathnormal|からの記号    & $<<\star>>$ \\
      |symbols|      & \LaTeX{}記号の多く         & $\leq*\geq$ \\
      |largesymbols| & 大きな記号                 & $\sum\prod\int$
   \end{tabular}
\end{center}
いくつかの数式フォントは、
\emph{数式文字フォント}と\emph{数学記号フォント}の両方にあります。
たとえば|\mathrm|と|operators|は同じフォントです。
また、|\mathnormal|と|letters|は同じフォントです。
 
\LaTeX{}の数式フォントはテキストフォントと同様に、
エンコード、ファミリ、シリーズ、シェイプ、サイズの５つの属性を持っています。
しかし、これらの属性を明示的に変更するためのコマンドはありません。
数式フォントから、これらの５つの属性への変換は
\emph{数式バージョン}によって制御されます。
次に|normal|数式バージョンのマップを示します。
\begin{center}
   \begin{tabular}{rlc@{ }c@{ }c@{ }c}
      \multicolumn{2}{c}{\emph{数式フォント}} &
      \multicolumn{4}{c}{\emph{外部フォント}} \\
      \emph{数式文字フォント} & \emph{数学記号フォント} &
      \multicolumn{4}{c}{\emph{属性}} \\
      |\mathnormal| & |letters|      & |OML| & |cmm|  & |m|  & |it| \\
      |\mathrm|     & |operators|    & |OT1| & |cmr|  & |m|  & |n|  \\
      |\mathcal|    & |symbols|      & |OMS| & |cmsy| & |m|  & |n|  \\
                    & |largesymbols| & |OMX| & |cmex| & |m|  & |n|  \\
      |\mathbf|     &                & |OT1| & |cmr|  & |bx| & |n|  \\
      |\mathsf|     &                & |OT1| & |cmss| & |m|  & |n|  \\
      |\mathit|     &                & |OT1| & |cmr|  & |m|  & |it| \\
      |\mathtt|     &                & |OT1| & |cmtt| & |m|  & |n|
   \end{tabular}
\end{center}
|bold|数式バージョンは、ボールドフォントを含んでいることを除き、同様です。
|\boldmath|コマンドは|bold|数式バージョンを選択します。
 
数式バージョンは数式モードの外側でだけ変更することができます。
 
次に、あらかじめ定義されている二つの数式バージョンを示します。
\begin{center}
   \begin{tabular}{rl}
      |normal| & デフォルトの数式バージョン\\
      |bold|   & 強調の数式バージョン
   \end{tabular}
\end{center}
パッケージで、新しい数式文字フォント、数学記号フォント、数式バージョンを
定義するかもしれません。
この章では、そのようなパッケージの記述方法について説明をしています。
 
\subsection{選択コマンド}
 
記号フォントを選択するためのコマンドはありません。
記号フォントは|\oplus|のような記号コマンドを通して選択されます。
記号コマンドを定義する方法については、
第\ref{Sec:math.commands}節で説明しています。
 
\begin{decl}
      |\mathnormal{<math>}|\\
      |\mathcal{<math>}|\\
      |\mathrm{<math>}|\\
      |\mathbf{<math>}|\\
      |\mathsf{<math>}|\\
      |\mathit{<math>}|\\
      |\mathtt{<math>}|
\end{decl}
それぞれの数式文字フォントコマンドは、数式モードの内側でだけ使うことができます。
たとえば、|$x + \mathsf{y} + \mathcal{Z}$|は
$x + \mathsf{y} + \mathcal{Z}$となります。
 
\begin{decl}
|\mathversion{<version-name>}|
\end{decl}
数式バージョンを選択します。このコマンドは、数式モードの外側でだけ使えます。
|\boldmath|は|\mathversion{bold}|として宣言されています。
 
\subsection{数式バージョンの宣言}
 
\begin{decl}
|\DeclareMathVersion| \arg{version-name}
\end{decl}
 
\m{version-name}の数式バージョンを定義します。
 
新しく宣言されたバージョンは、宣言されている、
すべての記号フォントと数式文字フォントのデフォルトで初期化します。
|\DeclareSymbolFont|と|\DeclareMathAlphabet|を参照してください。

すでに存在しているバージョンを指定すると、
ログファイルにインフォメーションメッセージが書き込まれ、
そのバージョン用の|\SetSymbolFont|や|\SetMathAlphabet|の宣言は、
数式文字フォントと記号フォントのデフォルトで上書きされます。
結局、数式バージョンの初期値となります。

例：
\begin{verbatim}
   \DeclareMathVersion{normal}
\end{verbatim}
 
 
\subsection{数式文字フォントの宣言}
 
\begin{decl}
|\DeclareMathAlphabet| \arg{math-alph} \arg{encoding} \arg{family}
                       \arg{series} \arg{shape}
\end{decl}
 
新しい数式文字フォントの\m{math-alph}を定義します。
 
引数\m{encoding} \m{family} \m{series} \m{shape}は、
すべての数式バージョンでの数式文字フォントのデフォルト値です。
これらは後から|\SetMathAlphabet|コマンドを使うことで、
特定の数式バージョンに対して、リセットすることができます。
\m{shape}が空の場合、\m{math-alph}は
後述の|\SetMathAlphabet|コマンドによって設定されていない限り、
すべてのバージョンで無効となります。
 
\m{math-alph}が使えるかと、
\m{encoding}が有効なエンコードスキーマかをチェックします。
 
次の例では、どこでも定義されている|\foo|と、
デフォルトで、どこにも定義されていない|\baz|を示しています。
\begin{verbatim}
   \DeclareMathAlphabet{\foo}{OT1}{cmtt}{m}{n}
   \DeclareMathAlphabet{\baz}{OT1}{}{}{}
\end{verbatim}
 
 
\begin{decl}
|\SetMathAlphabet| \arg{math-alph} \arg{version-name}\\
        \null\hfill\arg{encoding} \arg{family} \arg{series} \arg{shape}
\end{decl}
 
数式バージョン\m{version-name}の数式文字フォント\m{math-alph}のフォントを、
\m{encoding}\m{family}\m{series}\m{shape}に変更または設定をします。
 
\m{math-alph}が数式文字フォントであること、
\m{version-name}が数式バージョンであること、
\m{encoding}がエンコードスキーマであることをチェックします。
 
次の例では、`normal'数式バージョンだけのための|\baz|を定義しています。
\begin{verbatim}
   \SetMathAlphabet\baz{normal}{OT1}{cmss}{m}{n}
\end{verbatim}
 
この宣言は、すべての数式文字フォントに対して使用することができません。
第\ref{sec:symalph}節では、
|\DeclareSymbolFontAlphabet|について説明をしています。
このコマンドは、記号フォントとして宣言されたフォントに含まれている、
数式文字フォントを設定するのに使われます。
 
 
\subsection{記号フォントの宣言}
\label{sec:symalph}
 
\begin{decl}
|\DeclareSymbolFont| \arg{sym-font-name} \arg{encoding} \arg{family}
                     \arg{series} \arg{shape}
\end{decl}
 
新しい記号フォント\m{sym-font-name}を宣言します。
 
引数\m{encoding} \m{family} \m{series} \m{shape}は、
すべての数式バージョンでの記号フォントのデフォルト値です。
これらは後から|\SetSymbolFont|コマンドによって、
特定の数式バージョンに対してリセットすることができます。
 
\m{sym-font-name}が使えるか、
\m{encoding}が宣言されたエンコードスキーマかをチェックします。
 
 
たとえば、次の設定は、最初の４つの標準数学記号フォントの例です。
\begin{verbatim}
   \DeclareSymbolFont{operators}{OT1}{cmr}{m}{n}
   \DeclareSymbolFont{letters}{OML}{cmm}{m}{it}
   \DeclareSymbolFont{symbols}{OMS}{cmsy}{m}{n}
   \DeclareSymbolFont{largesymbols}{OMX}{cmex}{m}{n}
\end{verbatim}
 
 
\begin{decl}
|\SetSymbolFont| \arg{sym-font-name} \arg{version name}\\
     \null\hfill \arg{encoding} \arg{family} \arg{series} \arg{shape}
\end{decl}
 
数式バージョン\m{version name}用の記号フォント\m{sym-font-name}を
\m{encoding} \m{family} \m{series} \m{shape}に変更します。
 
\m{sym-font-name}が記号フォントであること、
\m{version name}が数式バージョンであること、
\m{encoding}が宣言されたエンコードスキーマであることをチェックします。
 
次の例は、`bold'数式バージョンの設定です。
\begin{verbatim}
   \SetSymbolFont{operators}{bold}{OT1}{cmr}{bx}{n}
   \SetSymbolFont{letters}{bold}{OML}{cmm}{b}{it}
\end{verbatim}
 
 
\begin{decl}
|\DeclareSymbolFontAlphabet| \arg{math-alph} \arg{sym-font-name}
\end{decl}
 
以前に宣言された記号フォント\m{sym-font-name}を
（すべての数式バージョンの）数式文字フォント\m{id}でも使えるようにします。
 
数式文字フォントと記号フォントが同じ場合、
|\DeclareMathAlphabet|や|\SetMathAlphabet|よりも、
この宣言を優先的に使ってください。
これは、\TeX の数式グループの制限（16個）をうまく使うためです。
 
\m{math-alph}が宣言できること、
\m{sym-font-name}が記号フォントであることをチェックします。
 
例：
\begin{verbatim}
   \DeclareSymbolFontAlphabet{\mathrm}{operators}
   \DeclareSymbolFontAlphabet{\mathcal}{symbols}
\end{verbatim}
 
 
\subsection{数学記号の宣言}
\label{Sec:math.commands}
 
\begin{decl}
|\DeclareMathSymbol| \arg{symbol} \arg{type} \arg{sym-font-name}
                     \arg{slot}
\end{decl}
 
\m{symbol}は、`|>>|'のような単一文字か、
|\sum|のようなマクロ名のどちらかです。
 
\m{symbol}を、記号フォント\m{sym-font-name}のスロット\m{slot}内の
タイプ\m{type}の数学記号として定義します。
\m{type}は数値かコマンドとして与えることができます。
\begin{center}
   \begin{tabular}{ccc}
      \emph{タイプ} & \emph{意味} & \emph{例} \\
      |0| or |\mathord  | & 普通の記号         & $\alpha$ \\
      |1| or |\mathop   | & 大型演算子         & $\sum$ \\
      |2| or |\mathbin  | & 二項演算子         & $\times$ \\
      |3| or |\mathrel  | & 関係演算子         & $\leq$ \\
      |4| or |\mathopen | & 開き括弧           & $\langle$ \\
      |5| or |\mathclose| & 閉じ括弧           & $\rangle$ \\
      |6| or |\mathpunct| & 句読点             & $;$ \\
      |7| or |\mathalpha| & 変数ファミリー     & $A$
   \end{tabular}
\end{center}
|\mathalpha|タイプの記号だけが数式文字フォントコマンドによって影響を受けます。
数式文字フォントコマンドの引数にある文字は、
数式文字フォントのスロット\m{slot}の文字を生成します。
その他のタイプの記号は、
（一つの数式バージョン内では）いつも同じ記号を生成します。
 
|\DeclareMathSymbol|は、以前に数学記号として定義された場合だけ、
マクロ\m{symbol}を再定義することができます。このときは、
\m{sym-font-name}が記号フォントとして定義されているかもチェックします。
 
例：
\begin{verbatim}
   \DeclareMathSymbol{\alpha}{0}{letters}{"0B}
   \DeclareMathSymbol{\lessdot}{\mathbin}{AMSb}{"0C}
   \DeclareMathSymbol{\alphld}{\mathalpha}{AMSb}{"0C}
\end{verbatim}
 
 
\begin{decl}
 |\DeclareMathDelimiter| \arg{cmd}   \arg{type}
               \arg{sym-font-name-1} \arg{slot-1}\\
  \null\hfill  \arg{sym-font-name-2} \arg{slot-2}
\end{decl}
\m{cmd}を、
記号フォント\m{sym-font-name-1}のスロット\m{slot-1}を小さな数式区切り、
記号フォント\m{sym-font-name-2}のスロット\m{slot-2}を大きな
数式区切りとなるように定義します。
どちらの記号フォントも、この前に定義されていなければなりません。
 
\m{sym-font-name-i}がどちらも宣言された記号フォントか確認してください。
 
\TeX{}がその区切りを見つけなければ、\m{cmd}は、
|\DeclareMathSymbol|で\m{type}, \m{sym-font-name-1}, \m{slot-1}として
定義されているかのように扱われます。
言い換えれば、コマンドが区切りとして定義されている場合、
それは自動的に数学記号として定義されるということです。
 
例：
\begin{verbatim}
   \DeclareMathDelimiter{\langle}{\mathopen}{symbols}{"68}
                                            {largesymbols}{"0A}
\end{verbatim}
 
 
\begin{decl}
|\DeclareMathAccent| \arg{cmd} \arg{type} \arg{sym-font-name} \arg{slot}
\end{decl}
 
\m{cmd}の数式アクセントを定義します。
 
アクセント文字は、\m{sym-font-name}のスロット\m{slot}となります。
\m{type}は|\mathord|か|\mathalpha|のどちらかです。
後者の場合、数式文字フォント内で使われたとき、
アクセント文字のフォントが変わります。
 
例：
\begin{verbatim}
   \DeclareMathAccent{\acute}{\mathalpha}{operators}{"13}
   \DeclareMathAccent{\vec}{\mathord}{letters}{"7E}
\end{verbatim}
 
 
\begin{decl}
|\DeclareMathRadical| \arg{cmd}
                    \arg{sym-font-name-1} \arg{slot-1}\\
       \null\hfill  \arg{sym-font-name-2} \arg{slot-2}
\end{decl}
 
\m{cmd}を、
記号フォント\m{sym-font-name-1}のスロット\m{slot-1}を小さな根号記号、
記号フォント\m{sym-font-name-2}のスロット\m{slot-2}を大きな根号記号
となるように定義します。
どちらの記号フォントも、この前に定義されていなければなりません。
 
例（たぶんこれが唯一）：
\begin{verbatim}
   \DeclareMathRadical{\sqrt}{symbols}{"70}{largesymbols}{"70}
\end{verbatim}
 
\subsection{数式サイズの宣言}
 
\begin{decl}
|\DeclareMathSizes| \arg{t-size} \arg{mt-size} \arg{s-size}
                    \arg{ss-size}
\end{decl}
 
カレントテキストサイズが\m{t-size}のとき、数式で、
\m{mt-size}は（メイン）数式テキストサイズ、\m{s-size}はスクリプトサイズ、
\m{ss-size}はスクリプトスクリプトサイズが使われるよう宣言します。
スクリプトおよびスクリプトスクリプトサイズが宣言されていないテキストサイズは、
そのフォントがロードされたときに、適切なサイズが計算されロードされます
（この結果は、警告メッセージを見てください）。
 
通常、\m{t-size}と\m{mt-size}は別個のものですが、たとえばPostScriptのように、
テキストフォントはビットマップ数式フォントと混在しているとき、
それぞれの\m{t-size}用の\m{mt-size}を持てないかもしれません。
 
例：
\begin{verbatim}
   \DeclareMathSizes{13.82}{12.4}{10}{7}
\end{verbatim}
 
\section{フォントインストール}
\label{Sec:install}
 
この節では、\LaTeX{}のフォント属性がどのようにして
\TeX{}のフォント指定に置き換えられるのかを説明します。
 
\subsection{フォント定義ファイル}
 
\LaTeX{}フォント属性がどのようにして\TeX{}フォントに置き変わるかの説明は、
通常\emph{フォント定義}(|.fd|)ファイルに記述されています。
\m{encoding}エンコードの\m{family}ファミリ用の|.fd|ファイルは
|<ENC><family>.fd|と呼ばれます。たとえば|OT1cmr.fd|はコンピュータモダン
ローマン用であり、|T1ptm.fd|はアドビタイムズ用です。
 
\LaTeX{}は、
たとえば文書デザイナーが|\fontfamily{ptm}\selectfont|とした場合など、
知らないエンコード/ファミリの組み合わせに出合うと、
いつでも適切な|.fd|ファイルをロードします。
``知らない''の意味は、このエンコード/ファミリの組合せ用の
|\DeclareFontFamily|宣言が発行されていないということです。
 
|.fd|ファイル内の宣言は、
エンコード/ファミリの組合せ用のフォントのロード方法を\LaTeX{}に伝えます。
|.fd|ファイルが見つからない場合は警告が発せられ代用フォントが作成されます。
 
 
\subsection{フォント定義ファイルコマンド}
 
|.fd|ファイルは、この節のコマンドだけを含むことができます。これらのコマンドは
|.fd|ファイルの外部でも使うことができることに注意してください。パッケージや
クラスファイル、文書のプリアンブルでも使うことができます。
 
\begin{decl}
   |\ProvidesFile{<file-name>}[<release-info>]|
\end{decl}
|.fd|ファイルは\emph{\clsguide}で説明されているように、
|\ProvidesFile|コマンドで自分自身をアナウンスしなければなりません。
次に例を示します。
\begin{verbatim}
   \ProvidesFile{T1ptm.fd}[1994/06/01 Adobe Times font definitions]
\end{verbatim}
 
\begin{decl}
|\DeclareFontFamily| \arg{encoding} \arg{family} \arg{loading-settings}
\end{decl}
 
エンコードスキーマ\m{encoding}で有効な、フォントファミリ\m{family}を宣言します。
 
\m{loading-setting}は、このエンコードとファミリのフォントがロードされた直後に
実行されます。
 
\m{encoding}がすでに宣言されていることをチェックしてください。
 
次の例では、
Corkエンコードのコンピュータモダンタイプライタフォントファミリを参照します。
\begin{verbatim}
   \DeclareFontFamily{T1}{cmtt}{\hyphenchar\font=-1}
\end{verbatim}
 
各|.fd|ファイルには、|\DeclareFontFamily|を必ず一つだけ、含めなくては
いけません。また、エンコード/ファミリの組合せに適切である必要があります。
 
\begin{decl}
|\DeclareFontShape| \arg{encoding} \arg{family} \arg{series}
                    \arg{shape}\\
        \null\hfill \arg{loading-info} \arg{loading-setting}
\end{decl}
 
フォントシェイプの組合せを宣言します。
ここで、\m{loading-info}は外部フォントのサイズに結合する情報です。
この複雑な構文はすでに第\ref{sec:loadinfo}節で説明してあります。
 
\m{loading-setting}はこのフォントシェイプのフォントがロードされた後で
実行されます。これらは|\DeclareFontFamily|によって宣言された
`loading-settigns'の直後に実行されます。また、そのファミリレベルで作られた
設定を上書きするために使うこともできます。
 
\m{encoding}\m{family}の組合せが事前に|\DeclareFontFamily|で宣言されているか
をチェックしてください。
 
例：
\begin{verbatim}
   \DeclareFontShape{OT1}{cmr}{m}{sl}{%
             <<5-8>> sub * cmr/m/n
             <<8>> cmsl8
             <<9>> cmsl9
             <<10>> <<10.95>> cmsl10
             <<12>> <<14.4>> <<17.28>> <<20.74>> <<24.88>> cmsl12
             }{}
\end{verbatim}
一つの|.fd|ファイルは|\DeclareFontShape|コマンドをいくつでも含むことができます。
ただし\m{encoding}と\m{family}は適切なものでなくてはなりません。
 
\subsection{フォントファイルのロード情報}
\label{sec:loadinfo}
 
\LaTeX{}にロードする{\tt .tfm}フォントファイルを正確に伝える情報は、
|\DeclareFontShape|宣言の\m{loading-info}部分に含まれています。
この部分には、次の形式を持つ、一つ以上の\m{fontshape-decl}で構成されます。
 
\begin{center}
\begin{tabular}{r@{ $::=$ }l}
 \m{fontshape-decl} &  \m{size-infos} \m{font-info} \\
 \m{size-infos}     &  \m{size-infos} \m{size-info} $\mid$
                       \m{size-info} \\
 \m{size-info}      & ``|<<|''  \m{number-or-range} ``|>>|'' \\
 \m{font-info}      & $[$ \m{size-function} ``|*|''  $]$
                      $[$ ``|[|'' \m{optarg} ``|]|'' $]$ \m{fontarg} \\
\end{tabular}
\end{center}
\m{number-or-range}は、この項目が要求する、サイズまたはサイズ範囲を示します。
 
ハイフンが含まれていれば、範囲と見なします。
小さい方（省略時はゼロ）が左側、大きい方（省略時は$\infty$）が右側です。
大きい値はその範囲には\emph{含まれません}、小さい方は含まれます。
 
例：
\begin{center}
\begin{tabular}{lll}
   |<<10>>|     &  simple size& 10pt only\\
   |<<-8>>|     &  range& 8ptより小さいすべてのサイズ\\
   |<<8-14.4>>| &  range& 8pt以上から14.4ptより小さいすべてのサイズ\\
   |<<14.4->>|  &  range& 14.4pt以上のすべてのサイズ
\end{tabular}
\end{center}
\m{font-info}に
複数の\m{size-info}項目の間に\m{font-info}が何もない場合、
それらは次の\m{font-info}を共有します。
 
\m{size-function}があれば、それが\m{font-info}を操作します。
なければ`空の'\m{size-function}が割り当てられます。
 
すべての\m{size-info}は、フォント宣言がされた順序で調べられます。
\m{size-info}が、要求されているサイズに合う場合は、
その\m{size-function}が実行されます。
|\external@font|が空でない場合は、処理は終了します。
そうでなければ、次の\m{size-info}が調べられます。
|\DeclareSizeFunction|も参照してください。
 
この処理が空でない|\external@font|を導き出せなければ、
\LaTeX{}は最も近いサイズで試します。
その項目が範囲だけを含んでいる場合は、エラーが返されます。
 
 
\subsection{サイズ関数}
\label{sec:sizefunct}
 
 
\LaTeX{}は\m{fontarg}と\m{optarg}を`読み込む'、
次のようなサイズ関数を提供します。
 
\begin{description}
\item[`' (空)]
外部フォント\m{fontarg}をユーザが要求したサイズでロードします。
\m{optarg}が指定されるとスケールファクターとして用いられます。
 
\item[s]
空関数に似ていますが、端末に警告を出力せず、ログにだけ出力します。
 
\item[gen]
ユーザが要求したサイズによって、\m{fontarg}から外部フォントを生成します。

e.g.~|<<8>> <<9>> <<10>> gen * cmtt|
 
\item[sgen]
`gen'関数に似ていますが、端末に警告を出力せず、ログにだけ出力します。
 
\item[sub]
\m{family}|/|\m{series}|/|\m{shape}形式の\m{fontarg}で与えられた、
異なるフォントシェイプ宣言からフォントをロードしようとします。
 
\item[ssub]
`sub'と同じですが、ログだけします。
 
\item[subf]
空関数に似ていますが、
要求されたフォントシェイプが、要求されたサイズで使用できないため、
\m{fontarg}の代用外部フォントを使う警告を発生します。
 
\item[ssubf]
`subf'と同じですが、ログだけします。
 
\item[fixed]
ユーザが要求したサイズを無視して、\m{fontarg}をロードします。
\m{optarg}があれば、それが与える``at \ldots pt''サイズが使われます。
 
\item[sfixed]
`fixed'と同じですが、ログだけします。
 
\end{description}
 
上記のサイズ関数の使い方の例は|cmfonts.fdd|ファイルで見ることができます。
標準の|.fd|ファイル用のソースはDonald Knuthによるコンピュータモダンフォントに
ついて説明しています。
 
 
\begin{decl}
|\DeclareSizeFunction| \arg{name} \arg{code}
\end{decl}
 
|\DeclareFontShape|コマンドで使われる\m{name}のサイズ関数を宣言します。
このインターフェイスはまだ開発中ですが、
新しいサイズ関数を宣言する必要は実際にはありません。
 
\m{code}は、ユーザが要求したサイズが|\DeclareFontShape|でのサイズ、
またはその範囲に一致したときに実行されます。
 
サイズ関数の引数は、自動的にスキャンされ、
\m{code}では|\mandatory@arg|と|\optional@arg|になります。
これは、もちろん、ユーザが要求した値である|\f@size|も使えます。
 
To signal success \m{code} must define the command |\external@font|
to contain the external name 
and any scaling options (if present) for the font to be loaded.
 
次の例は`空の'サイズ関数を設定します。
\begin{verbatim}
   \DeclareSizeFunction{}
           {\edef\external@font{\mandatory@arg\space at\f@size}
\end{verbatim}
 
 
\section{エンコード}
\label{Sec:encode}
 
この節では、新しいフォントエンコーディングの宣言方法と使用方法、
および特殊なエンコードを使うコマンドの宣言方法を説明します。
 
\subsection{\textsf{fontenc}パッケージ}
 
ユーザは|fontenc|パッケージを使いて新しいフォントエンコードを選択することが
できます。|fontenc|パッケージはエンコード用オプションを持っています。
最後のオプションがデフォルトエンコードになります。たとえば|T1|をデフォルト
として、|OT2|(Washington University Cyrillic encoding) と
|T1|エンコードを使うには、次のようにします。
\begin{verbatim}
   \usepackage[OT2,T1]{fontenc}
\end{verbatim}
 
このパッケージは、未定義のオプションとして与えられる、各フォントエンコード
\m{ENC}用に\emph{エンコード定義ファイル} (|<ENC>enc.def|)をロードします。
また、このオプションの並びの最後が|\encodingdefault|に設定されます。
 
\LaTeX{}は現在、|OT1|と|T1|テキストエンコードを前定義し、
ファイル|OT1enc.def|と|T1enc.def|を提供しています。
その他のエンコードの設定は、
ディストリビューションの最終段階で追加されるでしょう。
 
したがって、上記の例は|OT2enc.def|を読み込み、
|\encodingdefault|を|T1|に設定します。

\emph{注意：} `cmr'ファミリ以外のT1エンコードフォントを使いたい場合、
\texttt{fontenc}をロードする\emph{前に}、
そのフォントを選択するパッケージ（たとえば\texttt{times}）を
ロードする必要があるかもしれません。
このことは、システムがT1エンコードフォントを`cmr'ファミリから
ロードしようとすることを示しています。
 
\subsection{エンコード定義ファイル}
\label{Sec:encode.def}
 
{\bf 警告：} フォント定義ファイルの内容のいくつかの機能はまだ開発中です。
したがって|OT1enc.def|と|T1enc.def|の現バージョンは一時的なバージョンであり、
このようなファイルを作成するために、これらモジュールを使うべきではありません。
より多くの情報は|ltoutenc.dtx|を参照してください。
 
エンコード定義ファイルの宣言は、エンコードの宣言のために応答できます。
また\LaTeX{}にそのエンコード内の文字をどのように生成するかを伝えます。
 
|<ENC>enc.def|ファイルは、この節のコマンドだけを含むことができます。
フォント定義ファイルコマンドは、クラスやパッケージファイルの中で直接、
宣言するために使うことも可能です（しかし通常は必要ありません）。
 
\begin{decl}
   |\ProvidesFile{<file-name>}[<release-info>]|
\end{decl}
|<ENC>enc.def|ファイルは、|\ProvidesFile|コマンドで自分自身をアナウンス
しなくてはいけません。|\ProvidesFile|は、\emph{\clsguide}で説明されています。
\begin{verbatim}
   \ProvidesFile{OT2enc.def}
                [1994/06/01 Washington University Cyrillic encoding]
\end{verbatim}
 
 
\begin{decl}
|\DeclareFontEncoding| \arg{encoding} \arg{text-settings}
                       \arg{math-settings}
\end{decl}
 
新しいエンコードスキーマ\m{encoding}を宣言します。
 
\m{text-settings}は、|\selectfont|がエンコードを\m{encoding}に
変更するたびに実行される宣言です。
 
\m{math-setting}も同様ですが、数式文字フォント用です。
このエンコードが呼び出されたときに実行される数式文字フォントです。
 
文書にあるまわりの空白が破棄されるため、引数内にある空白は無視されます。
本当の空白が必要なときは|\space|を使ってください。
 
例：
\begin{verbatim}
   \DeclareFontEncoding{OT1}{}{}
\end{verbatim}
 
ある著者コマンドは現在使われているエンコードに依存した定義に変更することが
必要です。たとえば|OT1|エンコード内では文字`|\AE|'は|"1D|にありますが、
|T1|エンコードでは|"C6|の位置にあります。したがって|\AE|の定義は現在の
エンコードが|OT1|か|T1|かに関わり変更する必要があります。
このような事態には次のコマンドで対処します。
 
\begin{decl}
   |\DeclareTextCommand| \arg{cmd} \arg{encoding}
   \oarg{num} \oarg{default} \arg{definition}
\end{decl}
このコマンドは|\newcommand|と似ていますが、あるエンコードで指定されるコマンド
を定義します。たとえば、|OT1|エンコード内の|\aa|の定義は次のとおりです。
\begin{verbatim}
  \DeclareTextCommand{\aa}{OT1}{{\accent23a}}
\end{verbatim}
|\DeclareTextCommand|は|\newcommand|と同じオプション引数をとります。
 
\m{definition}内のコードがfragileでも、この結果のコマンドはrobustです。
 
このコマンドがすでに定義されている場合でもエラーを発生しませんが、
ログファイルに再定義が記録されます。
 
\begin{decl}[1994/12/01]
   |\ProvideTextCommand| \arg{cmd} \arg{encoding}
   \oarg{num} \oarg{default} \arg{definition}
\end{decl}
このコマンドは|\DeclareTextCommand|と同じですが、
\m{cmd}がエンコード\m{encoding}内で、すでに定義されている場合、
その宣言を無視する点が異なります。
 
\begin{decl}
   |\DeclareTextSymbol| \arg{cmd} \arg{encoding} \arg{slot}
\end{decl}
このコマンドはエンコードの位置\m{slot}にあるテキスト記号を定義します。
たとえば、|OT1|エンコードの|\ss|の定義は次のようにします。
\begin{verbatim}
   \DeclareTextSymbol{\ss}{OT1}{25}
\end{verbatim}
これは、コマンドがすでに定義されていてもエラーが発生しませんが、
ログファイルに再定義が記録されます。
 
\begin{decl}
   |\DeclareTextAccent| \arg{cmd} \arg{encoding} \arg{slot}
\end{decl}
このコマンドはエンコードの位置\m{slot}から取られるアクセントとしての、
テキストアクセントを宣言します。
たとえば、|OT1|エンコードの|\"|の定義は次のようにします。
\begin{verbatim}
   \DeclareTextAccent{\"}{OT1}{127}
\end{verbatim}
これは、コマンドがすでに定義されていてもエラーが発生しませんが、
ログファイルに再定義が記録されます。
 
\begin{decl}
   |\DeclareTextComposite| \arg{cmd} \arg{encoding} \arg{letter}
                           \arg{slot}
\end{decl}
 
このコマンドは\m{cmd}から要求される形式化された文字の組合せを定義します。
\m{letter}は単純にエンコードの位置\m{slot}として定義されます。\m{letter}は
|a|のような単一文字か、|\i|のような単一コマンドでなくてはなりません。
 
たとえば、
|T1|エンコードでの|\'{a}|の定義は次のようにして宣言することができます。
\begin{verbatim}
   \DeclareTextComposite{\'}{T1}{a}{225}
\end{verbatim}
 
\m{cmd}はすでに|\DeclareTextAccent|か、|\DeclareTextCommand|の第一引数として
宣言されていなければなりません。
 
\begin{decl}[1994/12/01]
   |\DeclareTextCompositeCommand| \arg{cmd} \arg{encoding} \arg{letter}
                           \arg{definition}
\end{decl}
これは|\DeclareTextComposite|のもう少し一般的な形式で、
\m{slot}ではなく、\m{definition}を用います。
主な使い方は、|\i|の上に置かれるようなアクセントを|i|の上に置くためです。
次に例を示します。
\begin{verbatim}
   \DeclareTextCompositeCommand{\'}{OT1}{i}{\'\i}
\end{verbatim}
このコマンドも|\DeclareTextComposite|と同様の制限を持ちます。
 
\subsection{デフォルト宣言}
 
\NEWdescription{1994/12/01}
\m{ENC}|enc.def|ファイルにあるコマンドは、
エンコード指定コマンドとして定義され、
その他のエンコード内では使うことができません。
たとえば、OMSエンコードは記号`\S'を含んでいますが、
コマンド|\S|をOMS以外のエンコードで用いることができません。

これを解決するために、\LaTeX{}には、
コマンドにデフォルトの宣言を与えるためのコマンドがあります。
このデフォルト値は、現在のエンコードでそのコマンドが定義されていないときに
使われます。たとえば、|\S|のデフォルトエンコードはOMSであり、
|\S|を含んでいないOT1のようなエンコードにいるときは、
OMSバージョンが選択されます。
しかし、T1のような、|\S|を含んでいるエンコードでは、
そのエンコード用のバージョンが使われます。

\emph{注意：}これらのコマンドは\m{ENC}|enc.def|ファイルには、
記述\emph{しないで}ください。このファイルにはそのエンコード用の
コマンド定義だけを含めるべきだからです。
これらはむしろ、パッケージに置かれるべきです。
 
\begin{decl}[1994/12/01]
   |\DeclareTextCommandDefault| \arg{cmd} \arg{definition}
\end{decl}
このコマンドは、エンコード指定コマンドにデフォルト宣言を与えます。
たとえば、|\copyright|のデフォルト定義は、
次のように、丸付き`c'として定義されています。
\begin{verbatim}
   \DeclareTextCommandDefault{\copyright}{\textcircled{c}}
\end{verbatim}
\begin{decl}[1994/12/01]
   |\DeclareTextAccentDefault| \arg{cmd} \arg{encoding} \\
   |\DeclareTextSymbolDefault| \arg{cmd} \arg{encoding}
\end{decl}
これらのコマンドは、エンコード指定コマンドにデフォルトエンコードを与えます。
たとえば、|\"|と|\ae|のデフォルトエンコードは、OT1に設定されています。
\begin{verbatim}
   \DeclareTextAccentDefault{\"}{OT1}
   \DeclareTextSymbolDefault{\ae}{OT1}
\end{verbatim}
|\DeclareTextAccentDefault|は、
一つの引数を持つ、どのようなエンコード指定コマンドに使うことができますが、
|\DeclareTextAccent|で定義されたコマンドにだけ使うことができることに
注意をしてください。
同様に、|\DeclareTextSymbolDefault|は、
引数を持たない、どのようなエンコード指定コマンドにも使うことができますが、
|\DeclareTextSymbol|で定義されたコマンドにだけ使うことができます。
 
これらの宣言の例は、|ltoutenc.dtx|で見ることができます。
 
\begin{decl}[1994/12/01]
   |\ProvideTextCommandDefault| \arg{cmd} \arg{definition}
\end{decl}
このコマンドは|\DeclareTextCommandDefault|とほぼ同じです。
違いは、このコマンドがすでにデフォルトの定義を持っている場合、
その定義が無視されることです。このコマンドは、
他のパッケージによって`真の'定義が与えられるかもしれない記号に、
`偽の'定義を与えるのに使います。
たとえば次のようにして、
パッケージで|\textonequarter|の偽の定義を与えているかもしれません。
\begin{verbatim}
   \ProvideTextCommandDefault{\textonequarter}{$\m@th\frac14$}
\end{verbatim}
 
 
\subsection{デフォルトエンコード}
 
\begin{decl}
|\DeclareFontEncodingDefaults| \arg{text-setting} \arg{math-setting}
\end{decl}
 
すべてのエンコードスキーマ用に\m{text-setting}と\m{math-setting}を宣言します。
実行されたものに依存するエンコードスキーマの前に実行されます。
したがって、多くの場合のためにデフォルトを設定し、
必要なときに|\DeclarefontEncoding|を使って上書きすることができます。
 
引数に|\relax|が使われた場合、デフォルトのカレント設定は未変更のままです。
 
次の例はアクセント位置にamsfonts.styを使います。
これは数式設定でだけ変更されます。
\begin{verbatim}
   \DeclareFontEncodingDefaults{\relax}{\def\accentclass@{7}}
\end{verbatim}
 
 
\begin{decl}
|\DeclareFontSubstitution|  \arg{encoding} \arg{family} \arg{series}
                            \arg{shape}
\end{decl}
 
エンコード\m{encoding}のフォントのときに使われるけれども、
そのカレント属性を持つフォントが見つからないときにロードされる、
代用フォントのためのデフォルト値を宣言します。
 
これらの代用のエンコードスキーマはローカルです。
なぜならエンコードスキーマは決して代用できないからです。
まず\m{shape}、次に\m{series}、そして最後に\m{family}の順で試します。
 
エンコード用のデフォルトが設定されていない場合、
|\DeclareErrorFont|によって与えられた値が使われます。
 
\m{encoding}\m{family}\m{series}\m{shape}用のフォント指定は、
必ず|\begin{document}|よりも前で、|\DeclareFontShape|で定義してください。
 
例：
\begin{verbatim}
   \DeclareFontSubstitution{T1}{cmr}{m}{n}
\end{verbatim}
 
 
\section{その他}
\label{Sec:misc}
 
 
この節では、\LaTeX{}のフォントコマンドの残りを説明します。
 
\subsection{代用フォント}
 
\begin{decl}
|\DeclareErrorFont| \arg{encoding} \arg{family} \arg{series}
                    \arg{shape} \arg{size}
\end{decl}
 
標準代用メカニズムが失敗した場合のフォント
\m{encoding}\m{family}\m{series}\m{shape}を宣言します。
標準メカニズムは、上記の|\DeclareFontSubstitution|コマンドを参照します。
 
\m{encoding}\m{family}\m{series}\m{shape}用のフォント指定は、
必ず|\begin{document}|の前で、|\DeclareFontShape|で定義してください。
 
例：
\begin{verbatim}
   \DeclareErrorFont{OT1}{cmr}{m}{n}{10}
\end{verbatim}
 
 
 
\begin{decl}
|\fontsubfuzz|
\end{decl}
 
このパラメータは、代用フォントサイズを使う場合に、
端末に警告を出力するかどうかを決定するために使われます。
要求されているものと選択されたサイズの違いが|\fontsubfuzz|よりも小さいとき、
警告はログファイルにだけ書かれます。デフォルト値は|0.4pt|です。
この値は、次のように|\renewcommand|で再定義することができます。
\begin{verbatim}
   \renewcommand{\fontsubfuzz}{0pt}   % always warn
\end{verbatim}
 
\subsection{プリローディング}
 
\begin{decl}
|\DeclarePreloadSizes| \arg{encoding} \arg{family} \arg{series}
                       \arg{shape}
\arg{size-list}
\end{decl}
 
 
フォーマットによってプリローディングされるべきフォントを指定します。
これらのコマンドは|preload.cfg|ファイルに置きます。
このファイルは\LaTeX{}フォーマットが生成されるときに読み込まれます。
コンフィグレーションファイルの組立方法についての情報は、
|preload.dtx|を参照してください。
 
例：
\begin{verbatim}
   \DeclarePreloadSizes{OT1}{cmr}{m}{sl}{10,10.95,12}
\end{verbatim}
 
 
\subsection{命名規則}
 
\begin{itemize}
\item
数式文字フォントコマンドは、|\mathbf|, |\mathcal|のように、
すべて|\math|ではじまります。
 
\item
引数を持つテキストフォント変更コマンドは、|\textbf|や|\textrm|のように、
すべて|\text|ではじまります。
|\emph|は、著者文書内でとても一般的に起こり、短い名前が適切なので例外です。
 
\item
エンコードスキーマ用の名前は、すべて英大文字の3文字以内の文字列です。
\LaTeX3 プロジェクトは、|T|（256文字の標準テキストエンコード）, 
|M|（256文字の標準数式エンコード）,
|S|（256文字の標準記号エンコード）,
|OT|（128文字の標準テキストエンコード）,
|OM|（128文字の標準数式エンコード）
ではじまるエンコードを予約しています。
上記ではじまる文字をポータブルでないエンコードのために使わないでください。
新しい標準エンコードができたとき、\LaTeX{}のリリース内でそれを追加します。
 
ローカルなエンコードスキーマは|L|ではじめてください。
 
\item
フォントファミリ名は、5文字以内の英小文字です。
できるだけフォント名スキーマを\emph{フォント用ファイル名}に一致させてください。
 
\item
フォントシリーズは、4文字以内の英小文字です。
 
\item
フォントシェイプは、2文字以内の英小文字です。
 
\item
記号フォント用の名前は英文字から組み立てられます。制限はありません。
\end{itemize}
 
できるだけ、\emph{\LaTeXcomp}で示唆したシリーズやシェイプ名を使ってください。
存在するフォントを新しく結合するのに簡単だからです。
 
\NEWdescription{1994/12/01}
   できるならば、テキスト記号の命名は、
   |\textonequarter|や|\textsterling|のように、
   |\text|のあとにアドビグリフ名を続けるようにしてください。
   同様に、数学記号も|\mathonequarter|や|\mathsterling|のように、
   |\math|にグリフ名を続けるように命名します。
   テキストまたは数式で使えるようなコマンドを定義するには、
   |\ifmmode|を使います。次に例を示します。
\begin{verbatim}
   \DeclareRobustCommand{\pounds}{%
      \ifmmode \mathsterling \else \textsterling \fi
   }
\end{verbatim}
   このような方法で定義されるコマンドは、
   これらが章名のような他に移動する引数に置かれた場合でも、
   robustでなくてはならないことに注意してください。

   
\begin{thebibliography}{1}
 
\bibitem{A-W:GMS94}
Michel Goossens, Frank Mittelbach and Alexander Samarin.
\newblock {\em The {\LaTeX} Companion}.
\newblock Addison-Wesley, Reading, Massachusetts, 1994.
 
\bibitem{tub:DKn89}
Donald~E. Knuth.
\newblock Typesetting concrete mathematics.
\newblock {\em {TUG}boat}, 10(1):31--36, April 1989.
 
\bibitem{A-W:LLa94}
Leslie Lamport.
\newblock {\em {\LaTeX:} A Document Preparation System}.
\newblock Addison-Wesley, Reading, Massachusetts, second edition, 1994.
 
\end{thebibliography}
 
\end{document}
 
